{% extends "core/base.html" %}
{% load i18n %}
{% load django_bootstrap5 %}
{% load leveltags %}
{% block content %}
    {% if object_list %}
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">
            {% for level in object_list %}
                {% level_color level request.user as level_color %}
                {% level_status level request.user as level_status %}

                <div class="col h-100">
                    <div class="card h-100">
                      <div class="card-header {{ level_color }}">
                            <h5 class="card-title mb-0">
                                {{ level.name }}
                                {% if level.show_points %}
                                    {# FIXME: level.show_points is not implemented yet #}
                                    <span class="float-end badge bg-secondary rounded-pill"><small>{{ level.points }} {% trans "pts" %}</small></span>
                                {% endif %}
                            </h5>
                        </div>
                        <div class="card-body">
                            {% if level.description %}<p>{{ level.description }}</p>{% endif %}
                            {% blocktrans count count=level.completed %}
                              <p><small>Completed by {{count}} user.</small></p>
                              {% plural %}
                              <p><small>Completed by {{count}} users.</small></p>
                            {% endblocktrans %}
                        </div>
                        {% if level_status == "available" %}
                            <div class="card-footer">
                                {% trans "Do it!" as doit_content %}
                                {% url 'level' level.pk as doit_link %}
                                {% bootstrap_button button_type="link" content=doit_content href=doit_link %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-danger" role="alert">{% trans "No levels defined." %}</div>
    {% endif %}
{% endblock %}
